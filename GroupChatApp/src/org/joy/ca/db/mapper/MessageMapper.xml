<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE mapper PUBLIC '-//mybatis.org//DTD Mapper 3.0//EN'
  'http://mybatis.org/dtd/mybatis-3-mapper.dtd'>

<mapper namespace='org.joy.ca.db.dao.EmojiDAO'>

	<select id='selectAllEmoji' resultMap='EmojiResult'>
		SELECT
			e.*
		FROM
			emoji e
		WHERE
			e.active IS TRUE
	</select>
	
	<select id='selectEmojiByGroup' parameterType='int' resultMap='EmojiResult'>
		SELECT
			e.*
		FROM
			emoji e
		WHERE
			e.e_group_id = #{eGroupId}
		AND e.active IS TRUE
	</select>
	
	<insert id='insertEmoji' parameterType='Emoji'>
		INSERT INTO emoji
		(
			emoji_code,
			emoji_name,
			emoji_data,
			e_group_id
		)
		VALUES
		(
			#{emojiCode}, 
			#{emojiName}, 
			#{emojiData}, 
			#{eGroupId}
		)

	</insert>
	
	<resultMap type='Message' id='MessageResult'>
		<id property='messageId' column='message_id' />
		<result property='senderId' column='sender_id' />
		<result property='receiverId' column='receiver_id' />
		<result property='message' column='message' />
		<result property='sentAt' column='sent_at' />
		<result property='senderIp' column='sender_ip' />
	</resultMap>
</mapper>